# raspbernetes

## Hardware

### Print List
* 1 Top, 4 Carts from [Raspberry Pi Rack Case](https://www.thingiverse.com/thing:2795195)
* 4 Middles from [Raspberry Pi ](https://www.thingiverse.com/thing:3224837)

### Purchase List
* 4 [ELEMENT Element14 Raspberry Pi 3 B+](https://www.amazon.com/gp/product/B07BDR5PDW/ref=oh_aui_detailpage_o01_s00?ie=UTF8&psc=1)  
* 1 [NETGEAR 5-Port Gigabit Ethernet Unmanaged Switch](https://www.amazon.com/gp/product/B00QR6XFHQ/ref=oh_aui_detailpage_o00_s00?ie=UTF8&psc=1)
* 4 [SanDisk 32GB Ultra microSDXC UHS-I Memory Card](https://www.amazon.com/gp/product/B073JWXGNT/ref=oh_aui_detailpage_o07_s00?ie=UTF8&psc=1)
* 1 [Anker PowerPort 6 (60W 6-Port USB Charging Hub)](https://www.amazon.com/gp/product/B00WI2DN4S/ref=oh_aui_detailpage_o08_s00?ie=UTF8&psc=1)
* 6 [Cat 6 Ethernet Cable 1 ft Black - Flat Internet Network Cable](https://www.amazon.com/gp/product/B01IQWGKQ6/ref=oh_aui_detailpage_o08_s00?ie=UTF8&psc=1)
* 1 package [Yootop 20Pcs Brass Pillar Spacers Male to Female Thread Hex Standoff Nut M4X25mm+6mm](https://www.amazon.com/gp/product/B07GWFLZMM/ref=oh_aui_detailpage_o09_s00?ie=UTF8&psc=1)

## Software

Download [Raspbian](https://www.raspberrypi.org/downloads/raspbian/)

Flash with [Etcher](https://www.balena.io/etcher/)

Enable SSH with 

```sh
$ touch /Volumes/boot/ssh
```

Eject the disk volume
```sh
$ sudo umount /Volumes/boot/ssh
```

Run ansible script
```sh
cd ansible && ansible-playbook cluster.yml --extra-vars "password=NEW_PASSWORD"
```

Copy Kubectl Config Locally
```sh
mkdir $HOME/.kube
ssh pi@raspbernetes1
sudo cp /etc/kubernetes/admin.conf ./raspbernetes.conf && chown pi raspbernetes.conf &&
scp -r pi@raspbernetes1:/home/pi/admin.conf $HOME/.kube
```

ADD KubeConfig Env Var
```sh
export KUBECONFIG=$HOME/.kube/config:raspbernetes.conf
```

List K8s Nodes
```sh
kubectl config use-context kubernetes
kubectl get nodes
```
